{% extends "base.html" %}

{% block content %}
  <h1>TASKS
    <a href="{% url 'manager:task-create' %}" class="btn btn-primary">Add new task</a>
  </h1>
  {% if task_list %}
      <table class="table">
        <tr>
          <th>Title</th>
          <th>Description</th>
          <th>Date</th>
          <th>Priority</th>
          <th>Completed</th>
          <th>Update</th>
          <th>DELETE</th>
        </tr>
        {% for task in task_list %}
          <tr>
            <td>{{ task.title }}</td>
            <td>{{ task.description }}</td>
            <td>{{ task.date }}</td>
            <td>{{ task.priority }}</td>
            <td>
              <form method="post" action="{% url 'manager:task-complete' pk=task.id %}">
                {% csrf_token %}
                <button id="checkButton{{ task.pk }}" class="btn btn-default" type="submit" name="complete" {% if task.completed %}disabled{% endif %}>
                   {% if task.completed %}Done{% else %}Check if done{% endif %}
                </button>
              </form>
            </td>
            <td><a href="{% url 'manager:task-update' pk=task.id %}" class="btn btn-secondary">UPDATE</a></td>
            <td>
               <form method="post" action="{% url 'manager:task-delete' pk=task.id %}" onsubmit="return confirm('Are you sure you want to delete this task?');">
                {% csrf_token %}
                <input type="submit" value="Delete" class="btn btn-danger">
              </form>
            </td>
          </tr>
        {% endfor %}
      </table>
    {% else %}
      <p>You have no tasks yet</p>
  {% endif %}
{% endblock %}
