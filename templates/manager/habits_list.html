{% extends "base.html" %}

{% block content %}
  <h1>HABITS
    <a href="{% url 'manager:habit-create' %}" class="btn btn-primary">Add new habit</a>
  </h1>
  {% if habit_list %}
      <table class="table">
        <tr>
          <th>Title</th>
          <th>Completed</th>
          <th>Repeat</th>
          <th>Difficulty</th>
          <th>Complete</th>
          <th>Update</th>
          <th>DELETE</th>
        </tr>
        {% for habit in habit_list %}
          <tr>
            <td>{{ habit.title }}</td>
            <td>{{ habit.completed_times }}</td>
            <td>{{ habit.repeatability }}</td>
            <td>{{ habit.difficulty }}</td>
            <td>
              <form method="post" action="{% url 'manager:habit-complete' pk=habit.id %}">
                {% csrf_token %}
                <button id="checkButton{{ habit.pk }}" class="btn btn-default" type="submit" name="complete" {% if habit.is_completed_today %}disabled{% endif %}>
                   {% if habit.is_completed_today %}Done{% else %}Check if done{% endif %}
                </button>
              </form>
            </td>
            <td><a href="{% url 'manager:habit-update' pk=habit.id %}" class="btn btn-secondary">UPDATE</a></td>
            <td>
              <form method="post" action="{% url 'manager:habit-delete' pk=habit.id %}" onsubmit="return confirm('Are you sure you want to delete this habit?');">
                {% csrf_token %}
                <input type="submit" value="Delete" class="btn btn-danger">
              </form>
            </td>
          </tr>
        {% endfor %}
      </table>
    {% else %}
      <p>You have no habits yet</p>
  {% endif %}
{% endblock %}
